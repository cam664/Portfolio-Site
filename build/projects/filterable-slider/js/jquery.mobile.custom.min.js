!function(e,t,n){"function"==typeof define&&define.amd?define(["jquery"],function(o){return n(o,e,t),o.mobile}):n(e.jQuery,e,t)}(this,document,function(e,t,n,o){(function(e,t,n,o){function i(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function s(t,n){var s,a,r,c,u,p,l,h,v,f=t.type;if(t=e.Event(t),t.type=n,s=t.originalEvent,a=e.event.props,f.search(/^(mouse|click)/)>-1&&(a=M),s)for(l=a.length,c;l;)c=a[--l],t[c]=s[c];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),f.search(/^touch/)!==-1&&(r=i(s),f=r.touches,u=r.changedTouches,p=f&&f.length?f[0]:u&&u.length?u[0]:o,p))for(h=0,v=X.length;h<v;h++)c=X[h],t[c]=p[c];return t}function a(t){for(var n,o,i={};t;){n=e.data(t,E);for(o in n)n[o]&&(i[o]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function r(t,n){for(var o;t;){if((o=e.data(t,E))&&(!n||o[n]))return t;t=t.parentNode}return null}function c(){B=!1}function u(){B=!0}function p(){H=0,O.length=0,z=!1,u()}function l(){c()}function h(){v(),C=setTimeout(function(){C=0,p()},e.vmouse.resetTimerDuration)}function v(){C&&(clearTimeout(C),C=0)}function f(t,n,o){var i;return(o&&o[t]||!o&&r(n.target,t))&&(i=s(n,t),e(n.target).trigger(i)),i}function d(t){var n,o=e.data(t.target,k);!z&&(!H||H!==o)&&(n=f("v"+t.type,t))&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}function m(t){var n,o,s,r=i(t).touches;r&&1===r.length&&(n=t.target,o=a(n),o.hasVirtualBinding&&(H=A++,e.data(n,k,H),v(),l(),N=!1,s=i(t).touches[0],L=s.pageX,S=s.pageY,f("vmouseover",t,o),f("vmousedown",t,o)))}function g(e){B||(N||f("vmousecancel",e,a(e.target)),N=!0,h())}function w(t){if(!B){var n=i(t).touches[0],o=N,s=e.vmouse.moveDistanceThreshold,r=a(t.target);N=N||Math.abs(n.pageX-L)>s||Math.abs(n.pageY-S)>s,N&&!o&&f("vmousecancel",t,r),f("vmousemove",t,r),h()}}function b(e){if(!B){u();var t,n,o=a(e.target);f("vmouseup",e,o),N||(t=f("vclick",e,o))&&t.isDefaultPrevented()&&(n=i(e).changedTouches[0],O.push({touchID:H,x:n.clientX,y:n.clientY}),z=!0),f("vmouseout",e,o),N=!1,h()}}function T(t){var n,o=e.data(t,E);if(o)for(n in o)if(o[n])return!0;return!1}function D(){}var y,x,E="virtualMouseBindings",k="virtualTouchID",P="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),X="clientX clientY pageX pageY screenX screenY".split(" "),Y=e.event.mouseHooks?e.event.mouseHooks.props:[],M=e.event.props.concat(Y),I={},C=0,L=0,S=0,N=!1,O=[],z=!1,B=!1,F="addEventListener"in n,j=e(n),A=1,H=0;for(e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},x=0;x<P.length;x++)e.event.special[P[x]]=function(t){var n=t.substr(1);return{setup:function(){T(this)||e.data(this,E,{}),e.data(this,E)[t]=!0,I[t]=(I[t]||0)+1,1===I[t]&&j.bind(n,d),e(this).bind(n,D),F&&(I.touchstart=(I.touchstart||0)+1,1===I.touchstart&&j.bind("touchstart",m).bind("touchend",b).bind("touchmove",w).bind("scroll",g))},teardown:function(){--I[t],I[t]||j.unbind(n,d),F&&(--I.touchstart||j.unbind("touchstart",m).unbind("touchmove",w).unbind("touchend",b).unbind("scroll",g));var o=e(this),i=e.data(this,E);i&&(i[t]=!1),o.unbind(n,D),T(this)||o.removeData(E)}}}(P[x]);F&&n.addEventListener("click",function(t){var n,o,i,s,a,r=O.length,c=t.target;if(r)for(n=t.clientX,o=t.clientY,y=e.vmouse.clickDistanceThreshold,i=c;i;){for(s=0;s<r;s++)if(a=O[s],0,i===c&&Math.abs(a.x-n)<y&&Math.abs(a.y-o)<y||e.data(i,k)===a.touchID)return t.preventDefault(),void t.stopPropagation();i=i.parentNode}},!0)})(e,0,n),function(e){e.mobile={}}(e),function(e,t){var o={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,o),e.extend(e.mobile.support,o)}(e),function(e,t,o){function i(t,n,i,s){var a=i.type;i.type=n,s?e.event.trigger(i,o,t):e.event.dispatch.call(t,i),i.type=a}var s=e(n),a=e.mobile.support.touch,r="touchmove scroll",c=a?"touchstart":"mousedown",u=a?"touchend":"mouseup",p=a?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){n=t,i(s,n?"scrollstart":"scrollstop",e)}var n,o,s=this,a=e(s);a.bind(r,function(i){e.event.special.scrollstart.enabled&&(n||t(i,!0),clearTimeout(o),o=setTimeout(function(){t(i,!1)},50))})},teardown:function(){e(this).unbind(r)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),o=!1;n.bind("vmousedown",function(a){function r(){clearTimeout(p)}function c(){r(),n.unbind("vclick",u).unbind("vmouseup",r),s.unbind("vmousecancel",c)}function u(e){c(),o||l!==e.target?o&&e.preventDefault():i(t,"tap",e)}if(o=!1,a.which&&1!==a.which)return!1;var p,l=a.target;n.bind("vmouseup",r).bind("vclick",u),s.bind("vmousecancel",c),p=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(o=!0),i(t,"taphold",e.Event("taphold",{target:l}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),s.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,o=t.pageYOffset,i=e.clientX,s=e.clientY;return 0===e.pageY&&Math.floor(s)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(i)>Math.floor(e.pageX)?(i-=n,s-=o):(s<e.pageY-o||i<e.pageX-n)&&(i=e.pageX-n,s=e.pageY-o),{x:i,y:s}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,o=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[o.x,o.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,o=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[o.x,o.y]}},handleSwipe:function(t,n,o,s){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var a=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return i(o,"swipe",e.Event("swipe",{target:s,swipestart:t,swipestop:n}),!0),i(o,a,e.Event(a,{target:s,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,o=e(n),i={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=i,i.start=function(t){if(!e.event.special.swipe.eventInProgress){e.event.special.swipe.eventInProgress=!0;var o,a=e.event.special.swipe.start(t),r=t.target,c=!1;i.move=function(t){a&&!t.isDefaultPrevented()&&(o=e.event.special.swipe.stop(t),c||(c=e.event.special.swipe.handleSwipe(a,o,n,r))&&(e.event.special.swipe.eventInProgress=!1),Math.abs(a.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())},i.stop=function(){c=!0,e.event.special.swipe.eventInProgress=!1,s.off(p,i.move),i.move=null},s.on(p,i.move).one(u,i.stop)}},o.on(c,i.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,0===--t.length&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(c,n.start),n.move&&s.off(p,n.move),n.stop&&s.off(u,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this),function(e,t){var o={animation:{},transition:{}},i=n.createElement("a"),s=["","webkit-","moz-","o-"];e.each(["animation","transition"],function(n,a){var r=0===n?a+"-name":a;e.each(s,function(n,s){if(i.style[e.camelCase(s+r)]!==t)return o[a].prefix=s,!1}),o[a].duration=e.camelCase(o[a].prefix+a+"-duration"),o[a].event=e.camelCase(o[a].prefix+a+"-end"),""===o[a].prefix&&(o[a].event=o[a].event.toLowerCase())}),e.support.cssTransitions=o.transition.prefix!==t,e.support.cssAnimations=o.animation.prefix!==t,e(i).remove(),e.fn.animationComplete=function(i,s,a){var r,c,u=this,p=function(){clearTimeout(r),i.apply(this,arguments)},l=s&&"animation"!==s?"transition":"animation";return e.support.cssTransitions&&"transition"===l||e.support.cssAnimations&&"animation"===l?(a===t&&(e(this).context!==n&&(c=3e3*parseFloat(e(this).css(o[l].duration))),(0===c||c===t||isNaN(c))&&(c=e.fn.animationComplete.defaultDuration)),r=setTimeout(function(){e(u).off(o[l].event,p),i.apply(u)},c),e(this).one(o[l].event,p)):(setTimeout(e.proxy(i,this),0),e(this))},e.fn.animationComplete.defaultDuration=1e3}(e)});